<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Food</title>
    <style>
        body { font-family: sans-serif; background: #f4f7f6; display: flex; justify-content: center; padding: 20px; }
        .card { background: white; padding: 25px; border-radius: 20px; width: 100%; max-width: 400px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        select { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; margin-top: 10px; }
        .res { display: none; margin-top: 20px; text-align: left; border-top: 1px solid #eee; padding-top: 20px; }
    </style>
</head>
<body>
    <div class="card">
        <h2>üõí Project Food</h2>
        <select id="sel"><option>–ó–∞–≥—Ä—É–∑–∫–∞...</option></select>
        <div id="out" class="res">
            <p><b>–í–µ—Å:</b> <span id="w"></span></p>
            <p><b>–ü–æ—Ä—Ü–∏–π:</b> <span id="s"></span></p>
            <div id="i"></div>
        </div>
    </div>

<script>
    // –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API (–±–µ–∑ –ª–∏—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫)
    const url = 'https://lmchwsdguarvdigfqxku.supabase.co/rest/v1/recipes';
    const key = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxtY2h3c2RndWFydmRpZ2ZxeGt1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzczMzI5NzUsImV4cCI6MjA1Mjk0ODk3NX0.3-vG_YF-L3kX-eBv-V-v-v-v-v-v-v-v-v-v-v-v';

    async function load() {
        try {
            const r = await fetch(url, { headers: { 'apikey': key, 'Authorization': `Bearer ${key}` } });
            const data = await r.json();
            const s = document.getElementById('sel');
            s.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –±–ª—é–¥–æ...</option>';
            data.forEach(item => {
                let opt = document.createElement('option');
                opt.value = item.id;
                opt.textContent = item.title;
                s.appendChild(opt);
            });
            s.onchange = () => {
                const dish = data.find(d => d.id == s.value);
                document.getElementById('out').style.display = 'block';
                document.getElementById('w').textContent = dish.total_weight;
                document.getElementById('s').textContent = dish.servings;
                let ingHtml = '<b>–°–æ—Å—Ç–∞–≤:</b><br>';
                JSON.parse(dish.ingredients).forEach(ing => {
                    ingHtml += `‚Ä¢ ${ing.n}: ${ing.w}<br>`;
                });
                document.getElementById('i').innerHTML = ingHtml;
            };
        } catch (e) {
            document.getElementById('sel').innerHTML = '<option>–û—à–∏–±–∫–∞: ' + e.message + '</option>';
        }
    }
    load();
</script>
</body>
</html>
